<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/72215895a8.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="address.css">
    <title>Address | Checkout</title>
</head>

<body>
    <div id="navbar">
        <img id="logo" src="https://bit.ly/3LDsXgz"
            alt="logo">

        <div id="div2">
            <h5 id="first">BAG</h5>
            <div class="line"></div>
            <h5>ADDRESS</h5>
            <div class="line"></div>
            <h5 id="third">PAYMENT</h5>
        </div>
        <div id="div3">
            <img src="https://constant.myntassets.com/checkout/assets/img/sprite-secure.png" alt="">
            <p>100 % <b>SECURE</b></p>
        </div>
    </div>
    <div id="cart">
        <div id="div">
            <div>
                <h3>Select Delivery Address </h3>
                <div>
                    <h5>ADD NEW ADDRESS</h5>
                </div>
            </div>
            <h5>DEFAULT ADDRESS</h5>
            <div>
                <div id="name">
                    <div>
                        <h4 id="userName">Sumit Kumar</h4>
                    </div>
                    <div id="home">Home</div>
                </div>
                <p id="userAddress">House No-C12,Old Extension Road,Gandhi Road,Karmik Nagar <br>Dhanbad,Jharkhand,PIN-123456</p>
                <p>Mobile No: <b id="userMobile">2314567898</b></p>
                <p>Pay on Delivery</p>
                <div id="option">
                   <div>
                       Remove
                   </div> 
                   <div id="editBtn" style="cursor: pointer;">
                       EDIT
                   </div>
                </div>
            </div>
            <div id="add">
                 +Add New Address  
            </div>
        </div>
        <div id="checkDiv">
           
            <div id="itemDiv">
                <h5>DELIVERY ESTIMATES</h5>
                Delivery Between 7Apr to 10Apr
                <br>
                
            </div>
            <a href="payment.html"> <div id="place">
            CONTINUE
         </div></a>
        </div>
    </div>
</body>

</html>
<script>
    document.querySelector('img').addEventListener('click', function(){
        window.location.href = "../Landingpage/index.html"
    })

    document.getElementById('first').addEventListener('click', function(){
        window.location.href = "../wishlist/cart.html"
    })
    document.getElementById('third').addEventListener('click', function(){
        window.location.href = "../payment/payment.html"
    })

    // Address Edit Functionality
    var defaultAddress = {
        name: "Sumit Kumar",
        address: "House No-C12,Old Extension Road,Gandhi Road,Karmik Nagar, Dhanbad,Jharkhand,PIN-123456",
        mobile: "2314567898"
    };

    function loadAddress() {
        var storedAddress = JSON.parse(localStorage.getItem("userAddress"));
        if (!storedAddress) {
            storedAddress = defaultAddress;
            localStorage.setItem("userAddress", JSON.stringify(storedAddress));
        }
        renderAddress(storedAddress);
    }

    function renderAddress(data) {
        document.getElementById("userName").innerText = data.name;
        document.getElementById("userAddress").innerText = data.address;
        document.getElementById("userMobile").innerText = data.mobile;
    }

    document.getElementById("editBtn").addEventListener("click", function() {
        var btn = document.getElementById("editBtn");
        if (btn.innerText === "EDIT") {
            // Switch to Edit Mode
            var name = document.getElementById("userName").innerText;
            var address = document.getElementById("userAddress").innerText;
            var mobile = document.getElementById("userMobile").innerText;

            document.getElementById("userName").innerHTML = `<input type="text" id="editName" value="${name}">`;
            document.getElementById("userAddress").innerHTML = `<textarea id="editAddress" rows="3" style="width:100%">${address}</textarea>`;
            document.getElementById("userMobile").innerHTML = `<input type="text" id="editMobile" value="${mobile}">`;

            btn.innerText = "SAVE";
            btn.style.color = "green";
            btn.style.fontWeight = "bold";
        } else {
            // Save Changes
            var newName = document.getElementById("editName").value;
            var newAddress = document.getElementById("editAddress").value;
            var newMobile = document.getElementById("editMobile").value;

            var newData = {
                name: newName,
                address: newAddress,
                mobile: newMobile
            };

            localStorage.setItem("userAddress", JSON.stringify(newData));
            renderAddress(newData);

            btn.innerText = "EDIT";
            btn.style.color = ""; // Reset color
        }
    });

    loadAddress();
</script>

